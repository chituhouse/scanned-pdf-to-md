---
name: cross-validate-template
description: OCR交叉验证通用模板 - 可适配任意双源OCR文档的交叉验证场景
---

# OCR交叉验证 Skill 模板

> 此模板可用于创建针对特定文档类型的交叉验证 Skill

## 如何使用此模板

1. 复制此文件到 `.claude/skills/your-skill-name/SKILL.md`
2. 根据你的文档类型，修改下方的配置项
3. 在 Claude Code 中使用 `/your-skill-name` 调用

---

## 配置项（请根据实际情况修改）

### 文档类型配置

```yaml
document_type: "试题"  # 修改为你的文档类型：试题/合同/报表/书籍
document_structure:
  - 单元类型: "套题"   # 文档的基本单元：套题/章节/页面
  - 单元数量: 20       # 预期单元数量
  - 识别模式: "年份月份" # 单元边界识别方式
```

### OCR源配置

```yaml
source_a:
  name: "纯OCR版"
  file_pattern: "*_纯OCR版.md"
  strengths: ["文字完整度高", "编号识别稳定"]
  weaknesses: ["表格结构差"]

source_b:
  name: "文档解析版"
  file_pattern: "*_文档解析版.md"
  strengths: ["表格识别优秀", "换行准确"]
  weaknesses: ["可能漏识文字"]
```

### 干扰内容配置

```yaml
interference_patterns:
  - "小象教育"      # 培训机构水印
  - "抖音"          # 平台水印
  - "douyin"        # URL片段
  - "www."          # 网址
  - "http"          # 链接
  - "^\d+$"         # 单独成行的页码（正则）
```

### 格式规范配置

```yaml
format_rules:
  option_format: "A. 选项内容"      # 选项格式：字母+点+空格+内容
  answer_format: "1. 【答案】A"     # 答案格式
  bracket_type: "中文"              # 括号类型：中文（）或英文()
```

---

## 输入文件

根据上方 `source_a.file_pattern` 和 `source_b.file_pattern` 配置

默认：
- 源A：`output/*_纯OCR版.md`
- 源B：`output/*_文档解析版.md`

---

## 工作流程

### 第一步：分割单元

按配置的 `document_structure.识别模式` 识别边界。

**试题类示例**：
```regex
(20\d{2})\s*年\s*(\d+)\s*月.*?(?:真题|试卷|考试)
```

**合同类示例**：
```regex
第[一二三四五六七八九十]+条
```

**书籍类示例**：
```regex
第[一二三四五六七八九十\d]+章
```

### 第二步：逐单元交叉验证

**重要：必须一个单元一个单元处理，绝对不能批量处理！**

对每个单元执行：

#### 2.1 内容合并

```
对每个内容块（题目/段落/表格）：
1. 从源A提取内容
2. 从源B提取同一内容
3. 合并生成完整内容：
   - 文本内容：取更完整的一版
   - 结构内容：优先源B（格式更好）
   - 编号/标识：优先源A（识别更稳定）
```

#### 2.2 内容补齐

```
- 源A有但源B没有 → 使用源A的内容
- 源B有但源A没有 → 使用源B的内容
- 两者都没有 → 标注 [缺失]
```

#### 2.3 干扰清除

根据 `interference_patterns` 配置，删除所有匹配的干扰内容。

#### 2.4 格式标准化

根据 `format_rules` 配置，统一格式。

#### 2.5 展示报告

每个单元处理完成后，必须展示验证报告并等待用户确认。

### 第三步：输出单元结果

每个单元输出到独立文件：
```
output/validated/
├── 01_[单元标识].md
├── 02_[单元标识].md
└── ...
```

### 第四步：合并最终文档

所有单元验证完成后，合并为：
```
output/[文档名]_验证版.md
```

---

## 验证规则（铁律）

### 三不原则

| 铁律 | 说明 |
|:---|:---|
| **不发挥** | 只使用两个MD文档中已有的内容 |
| **不编造** | 缺失内容标注 `[缺失]`，不猜测 |
| **不修改** | 只修复格式，不改动文字本身 |

### 优先级规则

| 内容类型 | 优先采用 | 原因 |
|:---|:---|:---|
| 结构/表格 | 源B（文档解析版） | 格式更好 |
| 文本内容 | 对比取更完整的 | 两版各有优劣 |
| 编号/标识 | 源A（纯OCR版） | 识别更稳定 |

### 冲突处理

当两版内容明显不一致时：
```markdown
[待人工确认：版本A为xxx，版本B为yyy]
```

---

## 输出格式

### 验证报告模板

```markdown
# [单元标识]

## 验证报告

### 统计
- 内容块数：XX
- 修复项：XX
- 待确认：XX

### 修复记录
1. [位置]：[修复内容]（来源：[版本]）
2. ...

### 待人工确认
1. [位置]：[问题描述]
   - 源A：xxx
   - 源B：yyy

---

## 正文内容

[验证后的完整内容...]
```

---

## 调用示例

用户输入：`/your-skill-name`

执行流程：
1. 读取两个源文件
2. 识别并列出所有单元
3. 询问用户：从第几个开始？
4. 逐单元处理，每个完成后输出报告
5. 全部完成后合并

---

## 适配其他文档类型的示例

### 合同文档

```yaml
document_type: "合同"
document_structure:
  - 单元类型: "条款"
  - 识别模式: "第X条"
format_rules:
  numbering: "第一条、第二条..."
  paragraph_indent: true
```

### 财务报表

```yaml
document_type: "财务报表"
document_structure:
  - 单元类型: "表格"
  - 识别模式: "表X"
format_rules:
  table_format: "markdown"
  number_precision: 2
```

### 书籍章节

```yaml
document_type: "书籍"
document_structure:
  - 单元类型: "章节"
  - 识别模式: "第X章"
format_rules:
  heading_style: "# 第一章 标题"
  paragraph_spacing: true
```

---

## 注意事项

- 每处理完一个单元，暂停并展示验证报告
- 用户确认后再继续下一个
- 如遇大量问题，建议分批处理
- 保持耐心，**质量优先于速度**

---

*模板版本：1.0*
*创建日期：2026-01-11*
*适用场景：任意双源OCR交叉验证*
